{"code":"!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";n.r(e);var r={map:[10,20],shape:{shape1:{stateNum:2,state1:{content:[[1],[1],[1],[1],[1]],row:[0,0,0,0,0]},state2:{content:[[1,1,1,1,1]],row:[0]}},shape2:{stateNum:1,state1:{content:[[1,1],[1,1]],row:[0,0]}},shape3:{stateNum:4,state1:{content:[[1,0],[1,1],[1,0]],row:[-1,0,-1]},state2:{content:[[0,1,0],[1,1,1]],row:[-1,0]},state3:{content:[[0,1],[1,1],[0,1]],row:[0,0,0]},state4:{content:[[1,1,1],[0,1,0]],row:[0,-1]}},shape4:{stateNum:4,state1:{content:[[1,1,1],[0,0,1]],row:[0,0]},state2:{content:[[0,1],[0,1],[1,1]],row:[0,0,0]},state3:{content:[[1,0,0],[1,1,1]],row:[-2,0]},state4:{content:[[1,1],[1,0],[1,0]],row:[0,-1,-1]}},shape5:{stateNum:2,state1:{content:[[1,0],[1,1],[0,1]],row:[-1,0,0]},state2:{content:[[0,1,1],[1,1,0]],row:[0,-1]}},shape6:{stateNum:2,state1:{content:[[0,1],[1,1],[1,0]],row:[0,0,-1]},state2:{content:[[1,1,0],[0,1,1]],row:[-1,0]}}}};const o=document.getElementById(\"elsfk-bg\"),a=document.getElementById(\"elsfk-block\"),l=o.getContext(\"2d\"),s=a.getContext(\"2d\");let c=(t,e,n,r)=>{1===e?t.fillRect(n,r,20,20):t.rect(n,r,20,20)},u=t=>{t.clearRect(0,0,200,400)};o.width=200,o.height=400,a.width=200,a.height=400;const i={drawBg:(t,e,n)=>((t,e,n)=>{u(l),l.fillStyle=\"#FFFF00\",l.strokeStyle=\"#000000\";for(let r=0;r<n;r++)c(l,t[r],r%e*20,20*parseInt(r/e));l.stroke()})(t,e,n),clearBg:()=>u(l)},f={drawShape:(t,e,n)=>((t,e,n)=>{u(s),s.fillStyle=\"#FFFF00\",s.strokeStyle=\"#000000\";for(let r=0,o=t.content.length;r<o;r++)for(let o=0,a=t.content[r].length;o<a;o++)c(s,t.content[r][o],20*(e+r),20*(n-a+1+o));s.stroke()})(t,e,n),clearBlock:()=>u(s)};let d=new function(){const t=r.map[0],e=r.map[1],n=t*e;let o,a,l=!1,s=!1,c=[],u=0,d=0,p=0,h=0;document.onkeydown=(t=>{let e=t||window.event,n=p,r=h,a=d;if(null!==o){if(37==e.keyCode||39==e.keyCode)return n+=e.keyCode%37-1,w(o[\"state\"+a],n,r)&&(p=n,f.drawShape(o[\"state\"+d],p,h)),!1;if(38==e.keyCode)return w(o[\"state\"+(a=d%u+1)],n,r)&&(d=a,f.drawShape(o[\"state\"+d],p,h)),!1;if(40==e.keyCode)return r+=1,w(o[\"state\"+a],n,r)&&(h=r,f.drawShape(o[\"state\"+d],p,h)),!1;80==e.keyCode&&(s?(g(),s=!1):(m(),s=!0))}});let w=(n,r,o)=>{let a=n.content,l=a.length,s=a[0].length;if(r<0||r+l>t||o>=e)return!1;for(let e=0;e<l;e++)for(let n=0;n<s;n++)if(1===c[r+e+(o-s+1+n)*t])return!1;return!0},y=()=>{if(l)return!1;o=r.shape[\"shape\"+parseInt(6*Math.random()+1)],u=o.stateNum,d=1,p=4,h=0},g=()=>{if(l)return!1;a=setInterval(function(){f.drawShape(o[\"state\"+d],p,h++),(h===e||((e,n,r)=>{let o=e.row,a=o.length;for(let e=0;e<a;e++){let a=(r+o[e])*t+n+e;if(1===c[a])return!0}return!1})(o[\"state\"+d],p,h))&&(((e,n,r)=>{let o=e.content;for(let e=0,a=o.length;e<a;e++)for(let a=0,s=o[e].length;a<s;a++){let u=n+e+(r-s+1+a)*t;if(u<0)return l=!0,!1;1===o[e][a]&&(c[u]=1)}})(o[\"state\"+d],p,h-1),f.clearBlock(),o=null,(()=>{let n=t;for(let t=e-1;t>0;t--){let e=0;for(;e<n&&0!==c[t*n+e];e++);if(e===n){let e=Array(n);e.fill(0),c.splice(t*n,n),c.splice(0,0,...e),t++}}})(),i.drawBg(c,t,n),clearInterval(a),l||(y(),g()))},1e3)},m=()=>{clearInterval(a)};this.init=(()=>{let e=Array(n);e.fill(0),c=e,i.drawBg(c,t,n)}),this.start=(()=>{y(),g()})};d.init(),d.start()}]);","extractedComments":[]}